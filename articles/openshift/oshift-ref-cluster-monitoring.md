---
title: OpenShift integrated cluster monitoring | UKCloud Ltd
description: Provides information on the Prometheus monitoring stack deployed with OpenShift v3.11
services: openshift
author: Kieran O'Neill
toc_rootlink: Reference
toc_sub1: 
toc_sub2:
toc_sub3:
toc_sub4:
toc_title: OpenShift integrated cluster monitoring
toc_fullpath: Reference/oshift-ref-cluster-monitoring.md
toc_mdlink: oshift-ref-cluster-monitoring.md
---

# OpenShift integrated cluster monitoring

### Overview

OpenShift 3.11 ships with a pre-configured and self-updating monitoring stack based on the Prometheus open source project. This ships with a set of alerts that notify the cluster admin of problems and a set of Grafana dashboards. The deployed Prometheus instance is responsible for monitoring and alerting on cluster and OpenShift components, while it will enable you to monitor the compute resources of your pods using the `K8s / Compute Resources / Pod` Grafana dashboard it shouldn't be extended to monitor user applications. Users interested in leveraging Prometheus for application monitoring on OpenShift should consider using the operator lifecycle manager (https://github.com/operator-framework/operator-lifecycle-manager) to easily deploy a Prometheus Operator and setup new Prometheus instances to monitor and alert on their applications. Alertmanager is a cluster-global component for handling alerts generated by all Prometheus instances deployed in that cluster.

### Resource

Cluster monitoring is deployed with persistent storage, this means that the metrics are stored on a persistent volume and can survive a pod being restarted or recreated. By default each Alertmanager instance is allocated 2Gi and each Prometheus instance is allocated 50Gi. In a standard cluster with two infrastructure nodes this will mean 106Gi of storage will be used for cluster monitoring. If the persistent volumes fill up, or you notice them getting close to being full, you can follow this guide to expand the persistent volumes or raise a ticket in the support portal: https://docs.ukcloud.com/articles/openshift/oshift-how-expand-persistent-vols.html

### Configuration

If you'd like to change the behaviour of Alertmanager e.g. have alerts notify somebody by email you'll need to raise a service request with us via the portal. The information we'll require is the cluster and the Alertmanager configuration you'd like to be used, we can then reconfigure the cluster-monitoring using the OpenShift ansible playbooks used to deploy it. If you attempt to edit the configMaps or secrets directly to insert this configuration the cluster-monitoring operator will detect these changes and restore default values. This documentation page can be used as a reference when creating Alertmanger config: https://prometheus.io/docs/alerting/configuration/

Please note that the OCP 3.11 delivery of the Prometheus Alertmanager only includes a default template. Configurations requiring a specific template should be avoided and may lead to failures to reconfigure the cluster-monitoring.

It is possible to inject additional configuration into the stack. However this is unsupported by Red Hat, as configuration paradigms might change across Prometheus releases, and such cases can only be handled gracefully if all configuration possibilities are controlled.

### Accessing Web UIs

`oc get routes -n openshift-monitoring` will give you the URLs you can use to access Prometheus, Alertmanage and Grafana UIs. You'll need to prepend `https://` to the addresses.

### Grafana Dashboards

If you navigate to the Grafana web UI you'll be able to access a number of pre-configured dashboards. These dashboards provide insight into the compute resource usage at cluster, node and pod levels. There are also USE Method dashboards at the cluster and node level. Click the dropdown in the top left on the home dashboard to select which dashboard you'd like to view.

Configuring custom dashboards isn't a supported option. If you require custom dashboards we'd recommend standing up your own grafana instance and connecting that into the cluster monitoring Prometheus.

### Further information

Below are some useful OpenShift documentation pages regarding OpenShift cluster monitoring:

https://prometheus.io/docs/introduction/overview/
https://grafana.com/docs/guides/getting_started/
https://docs.openshift.com/container-platform/3.11/install_config/prometheus_cluster_monitoring.html
https://github.com/openshift/cluster-monitoring-operator

## Feedback

If you find an issue with this article, click **Improve this Doc** to suggest a change. If you have an idea for how we could improve any of our services, visit [UKCloud Ideas](https://ideas.ukcloud.com). Alternatively, you can contact us at <products@ukcloud.com>.
