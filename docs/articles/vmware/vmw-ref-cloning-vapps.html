<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Cloning vApps using PowerCLI | UKCloud Ltd | UKCloud Knowledge Centre </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Cloning vApps using PowerCLI | UKCloud Ltd | UKCloud Knowledge Centre ">
    <meta name="generator" content="docfx 2.40.11.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container-fluid">
            <div class="navbar-margin-left">
              <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                
                <a class="navbar-brand" href="../../index.html">
                  <img id="logo" class="svg" src="../../logo.png" alt="">
                </a>
              </div>
              <div class="collapse navbar-collapse" id="navbar">
                <form class="navbar-form navbar-right" role="search" id="search">
                  <div class="form-group">
                    <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                  </div>
                </form>
              </div>
            </div>
          </div>
        </nav>
        
        <div class="navbar-borderless subnav navbar navbar-default">
          <div class="navbar-right subnav-margin-right">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/UKCloud/documentation/blob/master/articles/vmware/vmw-ref-cloning-vapps.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
          </div>
          <div class="hide-when-search subnav-margin-left" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container-fluid body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="container-fluid">
            <div class="row">
              <div class="col-lg-10">
                <article class="content wrap" id="_content" data-uid="">
                  
<h1 id="cloning-vapps-using-powercli">Cloning vApps using PowerCLI</h1>

<p>The vApp can be cloned whilst it is running as long as there is enough storage available on the source storage profiles, associated with the existing vApp. There is a manual GUI option where the vApp can be copied on the UKCloud Portal however this can be a lengthy process if there are number of vApps needing to be copied over. A good use case for this example would be if a customer was utilising like for like copies of production for pre-production environments.</p>
<p>In order to do the cloning efficiently a PowerCLI script is required. This article will guide you through the scripts required to automate the process of cloning, as well as removing this once a vApp is no longer required. The PowerCLI scripts can be plugged into various different configuration like tools such as Puppet or Chef and can also be integrated into orchestration tools such as Jenkins.</p>
<h3 id="script-to-clone-vapps">Script to clone vApps</h3>
<p>You can find an example of the PowerCLI script to clone and remove a vApp on UKCloud's GitHub repository: <a href="https://github.com/ukcloud/knowledge_centre/tree/master/CloningvAPPsUsingPowerCLI">https://github.com/ukcloud/knowledge_centre/tree/master/CloningvAPPsUsingPowerCLI</a></p>
<p>The example script clones the specified vApp into an existing catalogue within the appropriate vDC. The script provides an option for deployment once it has been cloned. If you select this option, the vApp is deployed by the script.</p>
<h3 id="stop-and-remove-vapp-using-powercli">Stop and remove vApp using PowerCLI</h3>
<p>When a vApp has been used and is no longer required, there is a remove PowerCLI script that provides an automated way of removing the cloned environment. This script stops the vAPP and then deletes it from the catalogue specified.</p>
<p>The scripts are executed using VMware vSphere PowerCLI. VMware vSphere PowerCLI is a command-line interface (CLI) tool for automating vSphere and vCloud management.</p>
<p>You can download the tool from: <a href="https://my.vmware.com/web/vmware/details?downloadGroup=PCLI600R3&amp;productId=536">https://my.vmware.com/web/vmware/details?downloadGroup=PCLI600R3&amp;productId=536</a>.</p>
<p><img src="images/vsphere_powercli.png" alt="Screenshot of vSphere PowerCLI"></p>
<h3 id="typical-use-case">Typical Use Case</h3>
<p>The figure below shows the flow between cloning a production environment to be re-used as pre-production and the environment being stopped and removed - using the scripts in UKCloud Github repository.</p>
<p><img src="images/vapp_clone.jpg" alt="vApp Clone use case"></p>
<h2 id="feedback">Feedback</h2>
<p>If you find an issue with this article, click <strong>Improve this Doc</strong> to suggest a change. If you have an idea for how we could improve any of our services, visit <a href="https://ideas.ukcloud.com">UKCloud Ideas</a>. Alternatively, you can contact us at <a href="mailto:products@ukcloud.com">products@ukcloud.com</a>.</p>


                  <div class="row">
                  </div>
                </article>
              </div>
              
              <div class="hidden-sm col-md-2" role="complementary">
                <div class="sideaffix">
                  <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                  <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
                  </nav>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right text-right">
              Generated by <strong>DocFX</strong><br>
              <a href="#top">Back to top</a>
            </span>
            <span>&copy <a href="http://ukcloud.com">UKCloud Ltd</a>, 2019. All Rights Reserved.<br><a href="https://ukcloud.com/legal">Privacy Policy. </a><a href="https://ukcloud.com/terms-and-conditions">Terms of Use. </a><a href="http://docs.ukcloud.com/articles/other/other-how-contribute-knowledge.html">Contribute. </a></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
    <script type="text/javascript" src="../../styles/highlight.js"></script>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-57433193-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-57433193-6');
    </script>  </body>
</html>
