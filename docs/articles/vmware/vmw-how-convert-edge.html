<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>How to convert your edge to an advanced gateway </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="How to convert your edge to an advanced gateway ">
    <meta name="generator" content="docfx 2.48.1.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container-fluid">
            <div class="navbar-margin-left">
              <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                
                <a class="navbar-brand" href="../../index.html">
                  <img id="logo" class="svg" src="../../styles/assets/logo.png" srcset="../../styles/assets/logo@2x.png 2x" width="300" height="49" alt="">
                </a>
              </div>
              <div class="collapse navbar-collapse" id="navbar">
                <form class="navbar-form navbar-right" role="search" id="search">
                  <div class="form-group">
                    <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                  </div>
                </form>
              </div>
            </div>
          </div>
        </nav>
        
        <div class="navbar-borderless subnav navbar navbar-default">
          <div class="navbar-right subnav-margin-right">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/UKCloud/documentation/blob/master/articles/vmware/vmw-how-convert-edge.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
          </div>
          <div class="hide-when-search subnav-margin-left" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container-fluid body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="container-fluid">
            <div class="row">
              <div class="col-lg-10">
                <article class="content wrap" id="_content" data-uid="">
                  
<h1 id="how-to-convert-your-edge-to-an-advanced-gateway">How to convert your edge to an advanced gateway</h1>

<h2 id="overview">Overview</h2>
<p>UKCloud for VMware offers advanced gateways to provide access to new vCloud Director functionality. Some of this functionality is available now, with other features being added following integration testing to assess suitability on our platform (some features may incur additional charges).</p>
<p>Advanced gateways in UKCloud for VMware provide:</p>
<ul>
<li><p><strong>NSX Tenant Portal</strong> - The new Tenant Portal is a pure HTML5 user interface that you can use in conjunction with the legacy vCloud Director Web Console. This portal provides an initial set of controls to configure Advanced Gateway NSX Edges.</p>
</li>
<li><p><strong>New API NSX management</strong> - vCloud Director provides a proxy API that enables vCloud API clients to make requests to the NSX API. Unlike the NSX API, which is designed to address NSX objects in a global scope, such as a vCenter database, the vCloud Director API for NSX is designed to address NSX objects within the scope of a vCloud Director tenant organisation.</p>
</li>
<li><p><strong>SSH edge access</strong> - If you enable SSH, you can perform your own packet captures and troubleshoot your edge gateway yourself, without having to contact UKCloud Support.</p>
</li>
<li><p><strong>Advanced networking options</strong> - Distributed networking features, namely Distributed Firewall, Distributed Logical Router and L2 VPN, to improve the performance of traffic within your VDC.</p>
</li>
</ul>
<div class="IMPORTANT">
<h5>Important</h5>
<p>After converting your edge gateway to an advanced gateway, the API endpoint for configuring edge services will change. Any tooling that you use to amend the edge service configuration, such as adding firewall rules, will no longer work in its current state. For more information about using the advanced gateway API, see the <a href="https://pubs.vmware.com/vcd-820/topic/com.vmware.ICbase/PDF/vcloud_nsx_api_guide_27_0.pdf"><em>vCloud Director API for NSX Programming Guide</em></a>.</p>
</div>
<div class="IMPORTANT">
<h5>Important</h5>
<p>After converting your edge to an advanced gateway, you will not be able to enable or disable logging on firewall rules via the advanced gateway GUI. To enable or disable logging, you must either use the API or raise a Service Request via the <a href="https://portal.skyscapecloud.com/support/ivanti">My Calls</a> section of the UKCloud Portal detailing the firewall rules for which you want to enable or disable logging so that we can action it on your behalf. When you convert an edge, the advanced gateway inherits the firewall logging configuration from the original edge. Enabling or disabling logging for NAT or load balancer services is not affected and you can edit those settings from the advanced gateway GUI as normal. For more information about using the API to amend firewall rules, see the <a href="https://pubs.vmware.com/vcd-820/topic/com.vmware.ICbase/PDF/vcloud_nsx_api_guide_27_0.pdf"><em>vCloud Director API for NSX Programming Guide</em></a>. This issue is fixed in vCloud Director 9.7.</p>
</div>
<h3 id="intended-audience">Intended audience</h3>
<p>To complete the steps in this guide you must have access to the UKCloud Portal and vCloud Director.</p>
<h2 id="prerequisites-and-known-issues">Prerequisites and known issues</h2>
<p>Before converting your edge gateway, review the prerequisites and known issues below:</p>
<ul>
<li><p><strong>Check your edge type</strong> - To check whether your edge is already an advanced gateway, in vCloud Director, select your VDC, select <strong>Edges</strong>, then select your edge. If the <strong>Convert to Advanced</strong> option is greyed out, your edge has already been converted. Click <strong>Configure Services</strong> to manage edge settings using the vCloud Director Tenant UI.</p>
</li>
<li><p><strong>Edge gateway version</strong> - When converting to an advanced gateway, your edge will be redeployed to the latest version.</p>
<div class="IMPORTANT">
<h5>Important</h5>
<p>As the conversion process causes the gateway to redeploy, you should always schedule an edge conversion during an outage window.</p>
</div>
<p>You can find out the version of your edge in the <em>My VMs</em> page of the UKCloud Portal. Select your VDC, select the <strong>Edge Gateway</strong> tab, then select your edge:</p>
<p><img src="images/vmw-myvms-edge-version.png" alt="Edge version in Portal"></p>
<p>For more detailed instructions, see <a href="vmw-how-upgrade-edge.html#checking-the-current-version-of-your-edge-gateway"><em>Checking the current version of your edge gateway</em></a>.</p>
</li>
<li><p><strong>Disabled firewalls</strong> - On an advanced gateway, if you disable the firewall, this also stops the NAT service, as it is dependent on the firewall. As a result, traffic flow that relies on NAT, such as NAT rules and the load balancer is stopped. If you attempt to disable the firewall service, the vCloud Director Web Console will display a warning. This is due to the firewall service being used to track stateful connections. See the following VMware Knowledge Base article for more information: <a href="https://kb.vmware.com/s/article/2093153">https://kb.vmware.com/s/article/2093153</a>.</p>
<p>If you convert an edge that already has the firewall disabled to an advanced gateway, the converted advanced gateway will have the firewall enabled, but with an Any, Any, Allow rule so that all traffic is allowed inbound or outbound.</p>
</li>
</ul>
<h2 id="converting-your-edge-to-an-advanced-gateway">Converting your edge to an advanced gateway</h2>
<p>To access the latest vCloud Director networking features, you need to convert your edge to an advanced gateway.</p>
<p>To convert your edge to an advanced gateway:</p>
<ol>
<li><p>In vCloud Director <em>Virtual Datacenters</em> dashboard, select the VDC that contains the edge gateway you want to convert.</p>
</li>
<li><p>In the left navigation panel, click <strong>Edges</strong>.</p>
<p><img src="images/vmw-vcd-mnu-edges.png" alt="Edges menu option in vCloud Director"></p>
</li>
<li><p>Select the edge that you want to convert and click <strong>Convert to Advanced</strong>.</p>
<p><img src="images/vmw-vcd-edge-btn-convert.png" alt="Convert to Advanced button"></p>
</li>
<li><p>Click <strong>Yes</strong> to start the conversion.</p>
<div class="IMPORTANT">
<h5>Important</h5>
<p>After converting your edge gateway, click <strong>Configure Services</strong> and check the firewall rules to make sure that the <strong>default rule for ingress traffic</strong> is set to <strong>Deny</strong>.</p>
</div>
<p><img src="images/conver-image-4.png" alt="Administration tab"></p>
</li>
</ol>
<h2 id="next-steps">Next steps</h2>
<p>To find out more about the advanced networking features provided by advanced gateways, see the following article:</p>
<ul>
<li><a href="vmw-ref-advanced-networking.html"><em>Advanced networking options for UKCloud for VMware</em></a></li>
</ul>
<h2 id="feedback">Feedback</h2>
<p>If you find an issue with this article, click <strong>Improve this Doc</strong> to suggest a change. If you have an idea for how we could improve any of our services, visit the <a href="https://community.ukcloud.com/ideas">Ideas</a> section of the <a href="https://community.ukcloud.com">UKCloud Community</a>.</p>


                  <div class="row">
                  </div>
                </article>
              </div>
              
              <div class="hidden-sm col-md-2" role="complementary">
                <div class="sideaffix">
                  <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                  <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
                  </nav>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right text-right">
              Generated by <strong>DocFX</strong><br>
              <a href="#top">Back to top</a>
            </span>
            <span>&copy <a href="https://ukcloud.com">UKCloud Ltd</a>, 2020. All Rights Reserved.<br><a href="https://ukcloud.com/legal">Privacy Policy. </a><a href="https://ukcloud.com/terms-and-conditions">Terms of Use. </a><a href="https://docs.ukcloud.com/articles/other/other-how-contribute-knowledge.html">Contribute. </a></span>
          </div>
        </div>
      </footer>
      
      <div id="cookie-cta" style="display: none;" aria-hidden="true">
        <div class="cookie-cta-inner container">
          <div class="cookie-cta-text">
            <p>
              The <strong>UKCloud Knowledge Centre</strong> uses cookies to ensure that we give you the best experience on our website. If you continue we assume that you consent to receive all cookies on this website.
            </p>
          </div>
      
          <div class="cookie-cta-action">
            <button class="cookie-cta-close button button--small">Accept</button>
          </div>
        </div>
      </div>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
    <script type="text/javascript" src="../../styles/highlight.js"></script>
    <!-- Enable Terraform syntax highlighting -->
    <script type="text/javascript" src="../../styles/terraform.js"></script>
    <script type="text/javascript">
      hljs.registerLanguage('terraform', window.hljsDefineTerraform);
      hljs.initHighlightingOnLoad();
    </script>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-57433193-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-57433193-6');
    </script>
  </body>
</html>
