<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>How to view storage profile usage | UKCloud Ltd | UKCloud Knowledge Centre </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="How to view storage profile usage | UKCloud Ltd | UKCloud Knowledge Centre ">
    <meta name="generator" content="docfx 2.40.9.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container-fluid">
            <div class="navbar-margin-left">
              <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                
                <a class="navbar-brand" href="../../index.html">
                  <img id="logo" class="svg" src="../../logo.png" alt="">
                </a>
              </div>
              <div class="collapse navbar-collapse" id="navbar">
                <form class="navbar-form navbar-right" role="search" id="search">
                  <div class="form-group">
                    <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                  </div>
                </form>
              </div>
            </div>
          </div>
        </nav>
        
        <div class="navbar-borderless subnav navbar navbar-default">
          <div class="navbar-right subnav-margin-right">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/UKCloud/documentation/blob/master/articles/vmware/vmw-how-view-storage-usage.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
          </div>
          <div class="hide-when-search subnav-margin-left" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container-fluid body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="container-fluid">
            <div class="row">
              <div class="col-lg-10">
                <article class="content wrap" id="_content" data-uid="">
                  
<h1 id="how-to-view-storage-profile-usage">How to view storage profile usage</h1>

<h2 id="overview">Overview</h2>
<p>Before allocating more disk space in your UKCloud for VMware account, it is useful to check how much of your allocated space has been used.</p>
<h2 id="viewing-your-storage-usage-vcloud-director-820">Viewing your storage usage (vCloud Director 8.20)</h2>
<ol>
<li><p>In vCloud Director, select the <strong>Administration</strong> tab.</p>
<p><img src="images/vmw-vcd-tab-admin.png" alt="Administration tab in vCloud Director"></p>
</li>
<li><p>Right-click your virtual data centre and select <strong>Open</strong>.</p>
</li>
<li><p>Select the <strong>Storage Policies</strong> tab.</p>
</li>
<li><p>The <strong>Requested/Limit</strong> column shows how much storage has been used as well as your storage limit.</p>
<p><img src="images/vmw-vcd-storage-usage.png" alt="Storage Policies tab"></p>
</li>
</ol>
<h2 id="viewing-your-storage-usage-vcloud-director-91">Viewing your storage usage (vCloud Director 9.1)</h2>
<ol>
<li><p>In the vCloud Director <em>Virtual Datacenters</em> dashboard, go to the card for your data centre.</p>
</li>
<li><p>The <em>Storage</em> section shows how much storage you're currently using as well as the amount of allocated storage.</p>
<p><img src="images/vmw-vcd91-storage-usage.png" alt="VDC card showing storage usage and allocation"></p>
</li>
</ol>
<h2 id="viewing-your-storage-usage-vcloud-api">Viewing your storage usage (vCloud API)</h2>
<p>To check your storage profile usage programmatically, you need to call the appropriate vCloud REST API endpoint.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Before calling this endpoint, you must first authenticate your session as described in <a href="vmw-how-access-vcloud-api.html"><em>How to access vCloud Director through the vCloud API</em></a>.</p>
</div>
<p>We've provided some sample code to show how to make this call on our <a href="https://github.com/ukcloud/knowledge_centre/tree/master/StorageProfileUsage">GitHub repository</a>.</p>
<p>The <code>using_curl.md</code> page provides an example of how to use CURL to call the REST API. The example assumes that you have set up the following three environment variables to hold your user credentials:</p>
<ul>
<li><p><code>VCD_ORG</code></p>
</li>
<li><p><code>VCD_USERNAME</code></p>
</li>
<li><p><code>VCD_PASSWORD</code></p>
</li>
</ul>
<p>The example makes two calls to the API. The first call authenticates the session:</p>
<pre><code>curl -u %VCD_USERNAME%@%VCD_ORG%:%VCD_PASSWORD%  -H &quot;Accept: application/*+xml;version=5.6&quot; -X POST -i https://api.vcd.portal.skyscapecloud.com/api/sessions
</code></pre>
<div class="TIP">
<h5>Tip</h5>
<p>On Linux, use <code>$VCD_USERNAME</code> instead of <code>%VCD_USERNAME%</code>.</p>
</div>
<p>Having authenticated successfully and received an <code>x-vcloud-authorisation</code> header in the response, the second call passes the authentication token as a header on the request:</p>
<pre><code>curl -H &quot;x-vcloud-authorization: a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6&quot; -H &quot;Accept: application/*+xml;version=5.6&quot; -i  https://api.vcd.portal.skyscapecloud.com/api/query?type=orgVdcStorageProfile
</code></pre>
<p>This call returns an XML structure, in which you can see an <code>OrgVdcStorageProfileRecord</code> element containing the following properties:</p>
<pre><code>storageLimitMB=&quot;512000&quot; storageUsedMB=&quot;65536&quot;
</code></pre>
<p>The GitHub repository also provides a ruby example. Again, the script assumes the above environment variables have been set up with your user credentials.</p>
<p>You can use the ruby script by running:</p>
<pre><code>ruby storage_profile.rb
</code></pre>
<p>The output will look similar to the following:</p>
<pre><code>Name        Used GB   Total GB   Percent   VDC
BASIC-Any   192       500        38.5%     XXXX
</code></pre>
<h2 id="feedback">Feedback</h2>
<p>If you have any comments on this document or any other aspect of your UKCloud experience, send them to <a href="mailto:products@ukcloud.com">products@ukcloud.com</a>.</p>


                  <div class="row">
                  </div>
                </article>
              </div>
              
              <div class="hidden-sm col-md-2" role="complementary">
                <div class="sideaffix">
                  <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                  <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
                  </nav>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right text-right">
              Generated by <strong>DocFX</strong><br>
              <a href="#top">Back to top</a>
            </span>
            <span>&copy <a href="http://ukcloud.com">UKCloud Ltd</a>, 2019. All Rights Reserved.<br><a href="https://ukcloud.com/legal">Privacy Policy. </a><a href="https://ukcloud.com/terms-and-conditions">Terms of Use. </a><a href="http://docs.ukcloud.com/articles/other/other-how-contribute-knowledge.html">Contribute. </a></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
    <script type="text/javascript" src="../../styles/highlight.js"></script>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-57433193-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-57433193-6');
    </script>  </body>
</html>
