<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>How to use UKCloud's email service with your application | UKCloud Ltd | UKCloud Knowledge Centre </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="How to use UKCloud's email service with your application | UKCloud Ltd | UKCloud Knowledge Centre ">
    <meta name="generator" content="docfx 2.45.1.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container-fluid">
            <div class="navbar-margin-left">
              <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                
                <a class="navbar-brand" href="../../index.html">
                  <img id="logo" class="svg" src="../../styles/assets/logo.png" srcset="../../styles/assets/logo@2x.png 2x" width="300" height="49" alt="">
                </a>
              </div>
              <div class="collapse navbar-collapse" id="navbar">
                <form class="navbar-form navbar-right" role="search" id="search">
                  <div class="form-group">
                    <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                  </div>
                </form>
              </div>
            </div>
          </div>
        </nav>
        
        <div class="navbar-borderless subnav navbar navbar-default">
          <div class="navbar-right subnav-margin-right">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/UKCloud/documentation/blob/master/articles/email/email-how-use-with-app.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
          </div>
          <div class="hide-when-search subnav-margin-left" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container-fluid body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="container-fluid">
            <div class="row">
              <div class="col-lg-10">
                <article class="content wrap" id="_content" data-uid="">
                  
<h1 id="how-to-use-ukclouds-email-service-with-your-application">How to use UKCloud's email service with your application</h1>

<h2 id="overview">Overview</h2>
<p>Many customers who use UKCloud's IaaS need to be able to send email from, or receive email into, their applications. Although we don't have an SMTP relay service dedicated to this purpose, you can use our Email and Collaboration service to meet your needs. This can be particularly valuable if you're using the UKCloud Elevated OFFICIAL (formerly PGA IL3) platform, as it doesn't connect directly to the internet, but to secure government networks such as PSN and HSCN, where few mail relay providers are available.</p>
<p>In this guide, we'll walk you through the process for configuring your application to use our Email &amp; Collaboration service.</p>
<h2 id="ukcloud-email-and-collaboration-as-a-service">UKCloud Email and Collaboration as a Service</h2>
<p>The service provides enterprise-class functionality for end-users, on a per-mailbox, per- month pricing model. It offers several options for mailbox access, including POP3, IMAP4 and SMTP --- all with TLS (SSL) encryption --- as well as HTTPS. Exchange ActiveSync is also supported.</p>
<p>Although the service was designed with end-users in mind, there's nothing to stop you using the supported protocols to allow an application to access a mailbox in order to send or receive email. This will generally be achieved via SMTP or POP3 over TLS.</p>
<p>It's worth noting that there's a minimum commitment of 25 mailboxes with this service --- but they don't all have to be used.</p>
<h2 id="email-on-the-elevated-official-platform">Email on the Elevated OFFICIAL platform</h2>
<p>The instructions in this document are written for the UKCloud Assured OFFICIAL (formerly PGA IL2)</p>
<p>platform, which is internet facing. If you wish to send and/or receive mail on the UKCloud Elevated OFFICIAL platform, the same general instructions apply, but there are a few differences to be aware of:</p>
<ul>
<li><p>The Elevated mail platform is PSN facing, so you'll need a PSN- or GCF- registered domain name in order to use the service</p>
</li>
<li><p>The hostname for UKCloud's mail server is different, and will be provided to you once your order has been processed</p>
</li>
<li><p>By default, you'll only be able to connect to UKCloud's mail server using HTTPS --- you'll need to raise a service request in the Elevated portal to request access from your virtual data centre to the UKCloud mail server via SMTP, POP3 or IMAP as required</p>
</li>
</ul>
<h2 id="getting-started-with-email-and-collaboration">Getting started with Email and Collaboration</h2>
<p>To start creating mailboxes on the Email and Collaboration service, you first need to decide on a domain name, which must be a real-world, registered domain name. You can use a new domain name, or simply delegate a sub-domain of your organisation's existing domain name.</p>
<p>You'll need to configure your chosen domain's MX record as <code>mail.skyscapecs.net</code>.</p>
<p>Once you've decided on a domain name and submitted your order form, the UKCloud team will configure your domain name on our platform and provide you with credentials for an administrator account. You'll be able to use this account to create mailboxes on the platform.</p>
<p>A mailbox will be needed for each email address you want to be able to send from, or receive to.</p>
<h2 id="configuring-a-mailbox-for-use-with-an-application">Configuring a mailbox for use with an application</h2>
<p>This section takes you through the process of configuring a mailbox on UKCloud's Email and Collaboration platform for use with an application.</p>
<p>The first step is to create a mailbox for this purpose. Once your domain name and administrator accounts have been configured, you can do this by logging on to the Administrator console at <a href="https://mail.skyscapecs.net:7071">https://mail.skyscapecs.net:7071</a></p>
<p>Create a new mailbox --- configure the account name and password as you normally would, but make sure you <strong>don't</strong> choose the option to force a password change:</p>
<p><img src="images/email-console-new-account.png" alt="Create mailbox"></p>
<p>Configure the remaining options in the New Account wizard to suit, then click <strong>Finish</strong> to complete the mailbox creation.</p>
<p>You're now ready to configure your application to connect to the mailbox to send and/or receive mail.</p>
<h3 id="sending-outbound-email">Sending outbound email</h3>
<p>To send outbound email, your application needs to support SMTP authentication and TLS encryption. Provided this is the case, simply configure the following settings in your application:</p>
<ul>
<li><p>SMTP Server/Mail relay host: mail.skyscapecs.net</p>
</li>
<li><p>Port number: 465</p>
</li>
<li><p>Use TLS*: Yes</p>
</li>
<li><p>Username/Password: as configured</p>
</li>
<li><p>From Address: as configured</p>
</li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>The mail server doesn't support upgrading from an insecure connection via the STARTTLS command. Your application will need to establish a secure connection before submitting SMTP commands.</p>
</div>
<h3 id="receiving-inbound-email">Receiving inbound email</h3>
<p>To receive inbound email, your application needs to support POP3 or IMAP4 over TLS.</p>
<p>Provided this is the case, simply configure the following settings in your application:</p>
<ul>
<li><p>Mailbox server: mail.skyscapecs.net</p>
</li>
<li><p>Protocol: POP3S or IMAPS</p>
</li>
<li><p>Port number: 993 (POP3S) or 995 (IMAPS)</p>
</li>
<li><p>Username/Password: as configured</p>
</li>
</ul>
<h2 id="applications-without-tls-support">Applications without TLS support</h2>
<p>Unfortunately, not all applications support sending or receiving mail over TLS. Some older applications may not support TLS at all, and some require use of the STARTTLS command for sending mail.</p>
<p>In this situation, you could consider using a 'wrapper' application, which will create the TLS tunnel independently of your application. A good example of such an application is stunnel: <a href="https://www.stunnel.org/index.html">https://www.stunnel.org/index.html</a></p>
<p>Stunnel can secure SMTP, IMAP4, POP3 (or any other protocol) as follows:</p>
<ul>
<li><p>A listener is created on your local system on a designated TCP port</p>
</li>
<li><p>Applications open unencrypted connections to this port</p>
</li>
<li><p>When an application connects, stunnel will open a secure connection to the UKCloud mail server</p>
</li>
<li><p>All commands sent by the application will be proxied directly to the UKCloud mail server over the secure connection</p>
</li>
<li><p>When the application terminates the insecure connection, stunnel terminates the secure connection</p>
</li>
</ul>
<p>The diagram below shows stunnel encrypting SMTP traffic.</p>
<p><img src="images/email-stunnel.png" alt="Stunnel encrypting SMTP traffic"></p>
<div class="NOTE">
<h5>Note</h5>
<p>An example working stunnel config is below to send smtp traffic on port 25 to zimbra on TLS port 465</p>
</div>
<pre><code class="lang-none">[smtp]
accept = 25
client = yes
connect = mail.skyscapecs.net:465
;delay = yes
</code></pre>
<p>You can get full documentation, how to and FAQ guides from the stunnel website.</p>
<h2 id="for-more-help">For more help</h2>
<p>If you need more help, contact UKCloud Support.</p>
<h2 id="feedback">Feedback</h2>
<p>If you find an issue with this article, click <strong>Improve this Doc</strong> to suggest a change. If you have an idea for how we could improve any of our services, visit the <a href="https://community.ukcloud.com/ideas">Ideas</a> section of the <a href="https://community.ukcloud.com">UKCloud Community</a>.</p>


                  <div class="row">
                  </div>
                </article>
              </div>
              
              <div class="hidden-sm col-md-2" role="complementary">
                <div class="sideaffix">
                  <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                  <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
                  </nav>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right text-right">
              Generated by <strong>DocFX</strong><br>
              <a href="#top">Back to top</a>
            </span>
            <span>&copy <a href="http://ukcloud.com">UKCloud Ltd</a>, 2019. All Rights Reserved.<br><a href="https://ukcloud.com/legal">Privacy Policy. </a><a href="https://ukcloud.com/terms-and-conditions">Terms of Use. </a><a href="http://docs.ukcloud.com/articles/other/other-how-contribute-knowledge.html">Contribute. </a></span>
          </div>
        </div>
      </footer>
      
      <div id="cookie-cta" style="display: none;" aria-hidden="true">
        <div class="cookie-cta-inner container">
          <div class="cookie-cta-text">
            <p>
              <strong>UKCloud Knowledge Centre</strong> uses cookies to ensure that we give you the best experience on our website. If you continue we assume that you consent to receive all cookies on this website.
            </p>
          </div>
      
          <div class="cookie-cta-action">
            <button class="cookie-cta-close button button--small">Accept</button>
          </div>
        </div>
      </div>    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
    <script type="text/javascript" src="../../styles/highlight.js"></script>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-57433193-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-57433193-6');
    </script>  </body>
</html>
